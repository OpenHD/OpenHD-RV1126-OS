# RKNN OP Support
Base on RKNN Toolkit Version 1.7.3

## Caffe OPs supported by RKNN
There are two caffe protocols RKNN Toolkit uses, one based on the officially modified protocol of berkeley, and one based on the protocol containing the LSTM layer.  
The protocol based on the official revision of berkeley comes from [berkeley caffe](https://github.com/BVLC/caffe/tree/master/src/caffe/proto "Berkeley Caffe"), commit hash is 21d0608. On this basis RKNN Toolkit have added some OPs.  
The protocol containing the LSTM layer refers to [warpctc caffe](https://github.com/xmfbit/warpctc-caffe/tree/master/src/caffe/proto "warpctc caffe"), commit hash is bd6181b.  
Based on these protocols, the list of Caffe OPs supported by RKNN is as follows:

| **Operators** |
|---|
| absval               |
| axpy                 |
| batchnorm            |
| bn                   |
| concat               |
| convolution          |
| convolutiondepthwise |
| deconvolution        |
| dropout              |
| eltwise              |
| flatten              |
| innerproduct         |
| l2normalizescale     |
| leakyrelu            |
| lrn                  |
| lstm                 |
| normalize            |
| permute              |
| pooling              |
| poolwithargmax       |
| prelu                |
| proposal             |
| relu                 |
| reorg                |
| reshape              |
| resize               |
| reverse              |
| roipooling           |
| scale                |
| shufflechannel       |
| sigmoid              |
| slice                |
| softmax              |
| split                |
| tanh                 |
| upsample             |

## Darknet OPs supported by RKNN
The list of Darknet OPs supported by RKNN is as follows:

| **Operators** |
|---|
| add                     |
| batchnormalize          |
| concat                  |
| convolutional           |
| depthwise_convolutional |
| fullconnect             |
| leakyrelu               |
| logistic                |
| mish                    |
| multiply                |
| noop                    |
| pooling                 |
| region                  |
| reorg                   |
| route                   |
| shortcut                |
| softmax                 |
| swish                   |
| upsampling              |

## Keras OPs supported by RKNN
The list of Keras OPs supported by RKNN is as follows:

| **Operators** |
|---|
| Activation             |
| Add                    |
| AveragePooling2D       |
| BatchNormalization     |
| BatchNormalizationV1   |
| Concatenate            |
| Conv1D                 |
| Conv2D                 |
| Conv2DTranspose        |
| Cropping2D             |
| Dense                  |
| DepthwiseConv2D        |
| Dropout                |
| Embedding              |
| Flatten                |
| GlobalAveragePooling2D |
| GlobalMaxPooling2D     |
| GRU                    |
| LeakyReLU              |
| LSTM                   |
| MaxPooling2D           |
| Multiply               |
| PReLU                  |
| ReLU                   |
| Reshape                |
| RNN                    |
| SeparableConv2D        |
| SimpleRNN              |
| Softmax                |
| Subtract               |
| ThresholdedReLU        |
| UpSampling2D           |
| ZeroPadding2D          |

## MXNet OPs supported by RKNN
The MXNet version supported by RKNN Toolkit is between 1.4.0 and 1.5.1, models generated by other versions may not support.  
The list of MXNet OPs supported by RKNN is as follows:

| **Operators** |
|---|
| _contrib_AdaptiveAvgPooling2D |
| _contrib_BilinearResize2D     |
| _div_scalar                   |
| _minus_scalar                 |
| _mul_scalar                   |
| _plus_scalar                  |
| BatchNorm                     |
| broadcast_mul                 |
| clip                          |
| Concat                        |
| Convolution                   |
| Crop                          |
| Deconvolution                 |
| elemwise_add                  |
| elemwise_mul                  |
| Flatten                       |
| FullyConnected                |
| leaky                         |
| LeakyReLU                     |
| Pooling                       |
| prelu                         |
| relu                          |
| Reshape                       |
| reverse                       |
| sigmoid                       |
| slice                         |
| slice_axis                    |
| softmax                       |
| SoftmaxActivation             |
| tanh                          |
| transpose                     |
| UpSampling                    |

## ONNX OPs supported by RKNN
​	The ONNX version supported by RKNN Toolkit is 1.6.0. According to [ONNX official instructions](https://github.com/microsoft/onnxruntime/blob/master/docs/Versioning.md "ONNX Version Description"), the corresponding onnx ir version is 6. Opset-version between 8~12 is allow for RKNN. Quantize ops support on onnxruntime version 1.5.2.
​	ONNX ops support has more detail infomation on at file [RKNN_Toolkit op support and limit.xlsx](./RKNN_Toolkit op support and limit.xlsx)


## PyTorch OPs supported by RKNN
​	The PyTorch version supported by RKNN Toolkit is between 1.6.0 and 1.10.0, models generated by other versions may not support.  
​	Pytorch ops support has more detail information at file [RKNN_Toolkit op support and limit.xlsx](./RKNN_Toolkit op support and limit.xlsx)


## TensorFlow OPs supported by RKNN
In compliance with semantic version, saved models written with one version of TensorFlow can be loaded and evaluated with a later version of TensorFlow with the same major release. So in theory, the pb files (contain OPs belows) generated by TensorFlow before version 1.14.0 are supported by RKNN Toolkit. For more information on TensorFlow version compatibility, please refer to [tensorflow official instructions on OP version](https://www.tensorflow.org/guide/versions "Tensorflow official instructions on OP version") .  
The list of TensorFlow OPs supported by RKNN is as follows:

| **Operators** |
|---|
| tf.add                             |
| tf.argmax                          |
| tf.argmin                          |
| tf.batch_matmul                    |
| tf.batch_to_space                  |
| tf.contrib.layers.instance_norm    |
| tf.depth_to_space                  |
| tf.div                             |
| tf.exp                             |
| tf.floor                           |
| tf.image.resize_bilinear           |
| tf.image.resize_nearest_neighor    |
| tf.keras.layers.LSTM               |
| tf.keras.layers.RNN                |
| tf.layers.dense                    |
| tf.layers.flatten                  |
| tf.less                            |
| tf.l2_normalize                    |
| tf.matmul                          |
| tf.mirrorPad                       |
| tf.mul                             |
| tf.nn.atrous_conv2d                |
| tf.nn.avg_pool                     |
| tf.nn.batch_normalization          |
| tf.nn.concat                       |
| tf.nn.conv2d                       |
| tf.nn.conv2d_transposed            |
| tf.nn.depthwise_conv2d             |
| tf.nn.elu                          |
| tf.nn.embedding_lookup             |
| tf.nn.fused_batch_norm             |
| tf.nn.l2_norm                      |
| tf.nn.leaky_relu                   |
| tf.nn.local_response_normalization |
| tf.nn.max_pool                     |
| tf.nn.max_pool_with_argmax         |
| tf.nn.pad                          |
| tf.nn.relu                         |
| tf.nn.relu6                        |
| tf.nn.sigmoid                      |
| tf.nn.slice                        |
| tf.nn.softmax                      |
| tf.nn.tanh                         |
| tf.reduce_mean                     |
| tf.reduce_sum                      |
| tf.reducemax                       |
| tf.reshape                         |
| tf.reverse                         |
| tf.rsqrt                           |
| tf.signal.frame                    |
| tf.space_to_batch                  |
| tf.space_to_depth                  |
| tf.split                           |
| tf.sqrt                            |
| tf.squeeze                         |
| tf.strided_slice                   |
| tf.sub                             |
| tf.transpose                       |

## TensorFlow Lite OPs supported by RKNN
RKNN Toolkit uses the TF Lite schema commits in link: 
https://github.com/tensorflow/tensorflow/commits/master/tensorflow/lite/schema/schema.fbs  
Commit hash: 0c4f5dfea4ceb3d7c0b46fc04828420a344f7598.  
Because TF Lite schema may not compatible with each other, TF Lite models with older or newer schema may not be loaded successfully.  
The list of TensorFlow Lite OPs supported by RKNN is as follows:

| **Operators** |
|---|
| ADD                          |
| ARG_MAX                      |
| ARG_MIN                      |
| AVERAGE_POOL_2D              |
| BATCH_TO_SPACE_ND            |
| CONCATENATION                |
| CONV_2D                      |
| CONV_2D_TRANSPOSE            |
| DEPTH_TO_SPACE               |
| DEPTHWISE_CONV_2D            |
| DEQUANTIZE                   |
| DIV                          |
| FLOOR                        |
| FLOOR_DIV                    |
| FULLY_CONNECTED              |
| GATHER                       |
| GREATER                      |
| GREATER_EQUAL                |
| L2_NORMALIZATION             |
| L2_POOL_2D                   |
| LEAKY_RELU                   |
| LESS                         |
| LESS_EQUAL                   |
| LOCAL_RESPONSE_NORMALIZATION |
| LOG_SOFTMAX                  |
| LOGISTIC                     |
| LSTM                         |
| MAX_POOL_2D                  |
| MIRROR_PAD                   |
| MUL                          |
| NEG                          |
| NOT_EQUAL                    |
| PAD                          |
| POW                          |
| PRELU                        |
| REDUCE_MAX                   |
| REDUCE_MIN                   |
| RELU                         |
| RELU_N1_TO_1                 |
| RELU1                        |
| RELU6                        |
| RESHAPE                      |
| RESHAPE                      |
| RESIZE_BILINEAR              |
| RESIZE_NEAREST_NEIGHBOR      |
| RSQRT                        |
| SELECT                       |
| SOFTMAX                      |
| SPACE_TO_BATCH_ND            |
| SPACE_TO_DEPTH               |
| SPLIT/SPLIT_V                |
| SQRT                         |
| SQUEEZE                      |
| STRIDED_SLICE                |
| SUB                          |
| SUM                          |
| SVDF                         |
| TANH                         |
| TILE                         |
| TRANSPOSE                    |
| UNIDIRECTIONAL_SEQUENCE_LSTM |
| UNPACK                       |
